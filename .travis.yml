language: python
python:
  - "3.6"
sudo: false
services:
  - mongodb
addons:
  apt:
    sources:
    - mongodb-3.2-precise
    packages:
    - mongodb-org-server
    - mongodb-org-shell
# command to install dependencies
install:
  - pip install -r b2note_api/requirements.txt
# command to run tests
before_script:
  - sleep 15
  - echo preparing
  - echo $MONGODB_NAME
  - echo ${MONGODB_USR}
  - mongo ${MONGODB_NAME} --eval 'db.createUser({"user":"${MONGODB_USR}","pwd":"${MONGODB_PWD}", roles:["readWrite"]});'
script:
  - echo testing
  - echo $MONGODB_NAME
  - echo ${MONGODB_USR}
  - cd b2note_api
  - python -m unittest

