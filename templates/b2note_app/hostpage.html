<!DOCTYPE html>

<html lang="en">

<head>
	<meta charset="UTF-8">

	{% load staticfiles %}

    <link rel='stylesheet' type='text/css' href="{% static 'css/bootstrap.min.css' %}" />
    <link rel='stylesheet' type='text/css' href="{% static 'css/style.css' %}" />

    <script src="{% static 'js/jquery-1.11.3.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/utils.js' %}"></script>

	<title>B2NOTE service pilot</title>

<style>
	#header {height: auto !important; }

	#hostpage {background: #FFFFFF; }
	#content {background: #FFFFFF url("/static/images/bg_b2note.jpg") no-repeat fixed center center !important; padding-bottom: 40px;}

	#hostpage h1 {text-align: left;}
	footer {
	    /* background: #dddddd url("/static/images/decor-footer.png") no-repeat scroll right bottom; */
	    background: #f7f3e9 url("/static/images/color-line.png") repeat-x scroll left top;
	    height: auto;
	    padding: 20px 40px;
	}
	#footer-content {
	    display: table;
	    margin: 0 auto;
	    padding-top: 10px;
	}
	#footer-content img {
	    float: left;
	    margin-right: 10px;
	}
	#footer-content p {
	    font-size: 11px;
	    width: 100%;
	}
	#footer-content a {
	    color: #e5601e;
	}

	.clearfix, clearfix::before {clear:both;}

	.navbar-nav > li > a {
	    padding-bottom: 5px;
	    padding-top: 5px;
	}

	footer .navbar-nav > li > a {
	    font-size: 11px;
	}
</style>

</head>

<body id="hostpage">

	<header>

		<div id="header-top">

			<a href="http://www.eudat.eu" target="_blank">GO TO EUDAT WEBSITE</a>

		</div>

		<div class = "container" id="header">

            <section class="row clearfix">

              <div class="col-xs-12 col-sm-12 col-md-2">
                    <img alt="EUDAT" title="EUDAT" src="/static/images/logo.png" style="width: 100%;"/>
                </div>

                <div class="col-xs-12 col-sm-12 col-md-10">
    			    <!--img alt="B2NOTE" title="B2NOTE" src="{% static 'images/B2NOTE - logo.png' %}" /-->
                </div>

                <div class="clear"> </div>

            </section>

		</div>

        <div class="clear"> </div>

	</header>


	<div class = "container" id="content">

        {% if version == "production" %}

        <div style="position:absolute; top: 200px; right: 5%; border: 1px solid #1133EE; padding: 10px; background: #FAFAFA; border-radius: 10px"><br>
            <h3 style="font-size: 20px;">Make annotations </h3><br>
            <div style="width: 70%; margin-left: auto; margin-right: auto;">
                <a href="https://b2share.eudat.eu" class="btn btn-primary" title="Click to be directed to B2SHARE." target="_blank">Go to B2SHARE</a>
            </div> <br><br><br>
            <h3 style="font-size: 20px;">Learn and Train</h3><br>
            <div style="width: 50%; margin-left: auto; margin-right: auto;">
                <a href="https://trng-b2share.eudat.eu" class="btn btn-primary" title="Click to be directed to B2SHARE training instance." target="_blank">Sandbox</a>
            </div><br>
        </div>

        <div class = "container">
            <h1>B2NOTE</h1>
            <p>The EUDAT annotation service<br><br></p>
        </div>

        <div class = "container">
            <h3>Use annotations to structure your data</h3>
            <p>An annotation is a keyword or commentary attached to a file, that explains or classifies it. With B2Note, you can easily create and manage your annotations. There exist 3 types of annotations in B2Note:</p>
            <ul>
                <li>The <b>semantic tag</b>, a keyword from an <b>ontology</b>;</li>
                <li>The <b>free-text keyword</b>, a keyword chosen by the user. If possible, use semantic tags over free-text keywords.</li>
                <li>The <b>comment</b>, a longer annotation</li>
            </ul>
            <p>B2Note is currently integrated in B2Share: access files with B2Share, then annotate them with B2Note.</p>
        </div>

        <div class = "container">
            <h3>How to use it</h3>
            <p>Here is how to access the B2NOTE console from a B2SHARE file record page.</p>
            <p><b>Step 1:</b> Pick a file in <a href="https://b2share.eudat.eu">B2SHARE</a>.</p>
            <p><b>Step 2:</b> Click on the arrow next to the file you want to annotate to reveal the annotation button.</p>
            <p style="text-align:center;"><img src={% static "images/Description_UseinB2SHARE.png" %} style="width:550px;"/></p>
            <p><b>Step 3:</b> Click on the button to show the widget. The widget should appear at the right of the browser window.</p>
            <p style="text-align:center;"><a href="https://b2share.eudat.eu" class="btn btn-primary" title="Click to be directed to B2SHARE." target="_blank"/>Access B2SHARE</a></p>
        </div>

        <div class = "container">
            <h3>Sandbox</h3>
            <p>Annotations are ony valuable if they make sense. If you want to make random annotations for trying B2Note, please use the <a href="https://b2note.bsc.es">sandbox</a>.</p>
        </div>

        {% elif version == "sandbox" %}

        <div class = "container">

            <!-- http://stackoverflow.com/questions/12102464/how-do-i-make-iframes-load-only-on-a-button-click -->
            <iframe id="b2note_iframe" name="b2note_iframe" src="{{src}}"
                width={{iframe_on}} onload="load_iframe('{{ subject_tofeed }}')"
                scrolling="no"></iframe>

        </div>

        <div class = "container">

            <h1>B2NOTE sandbox</h1>

        </div>

        <div class="container" style="margin-top:10px;margin-bottom:10px;">
            <p style="font-size:12px;">This is the sandbox for B2Note. Here you can try and learn, but no guarantee is
                provided on the preservation of annotations.</p>
        </div>

        <div class = "container">
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"  style="margin-bottom:0px;padding-bottom:0px;">
                <h3>
                    <a class="btn btn-info" data-toggle="collapse" data-parent="#accordion" href="#collapse1" role="tab" aria-controls="collapse1"><strong>How to use it</strong></a>
                    <a class="btn btn-warning" data-toggle="collapse" data-parent="#accordion" href="#collapse2" role="tab" aria-controls="collapse2">B2Share integration</a>
                    <!--<a href="/login" class="btn btn-default btn" title="Registered user, log in to your home page.">Registered user</a>-->
                </h3>
                <div class="panel" style="border:0px;background:none;margin-bottom:0px;padding-bottom:0px;">
                    <div id="collapse2" class="panel-collapse collapse" role="tabpanel">
                        <p>Here is how to access the B2NOTE console from a B2SHARE file record page.</p>
                        <p><b>Step 1:</b> Pick a file in <a href="https://trng-b2share.eudat.eu">B2SHARE</a>.</p>
                        <p><b>Step 2:</b> Click on the arrow next to the file you want to annotate to reveal the annotation button.</p>
                        <p style="text-align:center;"><img src={% static "images/Description_UseinB2SHARE.png" %} style="width:550px;"/></p>
                        <p><b>Step 3:</b> Click on the button to show the widget. If the widget does not appear, please change the size of your browser window (use Ctrl – or Cmd -). The widget should appear at the bottom right of the browser window. We will fix these issues in the upcoming weeks.</p>
                        <p style="text-align:center;"><a href="https://trng-b2share.eudat.eu" class="btn btn-primary" title="Click to be directed to B2SHARE training instance." target="_blank"/>Access B2SHARE training instance</a></p>
                        <!--<p style="text-align:center;"><img src={% static "images/B2SHARE_integration_record_folded.png" %} style="width:320px;"/></p>-->
                        <!--<p style="text-align:center;"><img src={% static "images/B2SHARE_integration_record_unfolded.png" %} style="width:320px;"/></p>-->
                    </div>
                </div>
                <div class="panel" style="border:0px;background:none;margin-bottom:0px;padding-bottom:0px;">
                    <div id="collapse1" class="panel-collapse collapse" role="tabpanel">
                        <p>This page emulates the <strong>outcome of a search</strong> performed by a user of EUDAT services such as B2SHARE.</p>
                        <p>Thus, it displays a list of hyperlinks pointing to <strong>files stored by EUDAT</strong>.</p>
                        <br>
                        <p>Next to each hyperlink stands a "Create Annotation" button.</p>
                        <p>Clicking one of these buttons <strong>triggers the B2NOTE interface</strong>.</p>
                        <br>
                        <p>The B2NOTE interface allows the user to <strong>select semantic concepts </strong> for describing the corresponding file.</p>
                        <p>The semantic relations created in the process are <strong>stored</strong> by the B2NOTE service, allowing later retrieval and processing.</p>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class = "container">

            <h3>The list of files:</h3>

            <table>

                {% for file_info in buttons_info %}

                <!-- For the production version the url will be pointing to https://b2note.bsc.es/api/create_annotation -->
                <form action="/interface_main" method="post" target="b2note_iframe">

                    {% csrf_token %}

                    <tr class="row1" colspan="2">

                        <td></td>

                    </tr>

                    <tr class="row2">

                        <td>

                            <input type="hidden" name="subject_tofeed" value="{{ file_info.file_url }}" class="field left" readonly="readonly" />
                            <a href="{{ file_info.file_url }}" target="_blank">{{ file_info.link_label }}</a>
                            <input type="hidden" name="pid_tofeed" value="{{ file_info.file_pid }}" class="field left" readonly="readonly" />

                        </td>

                        <td rowspan="2">

                            <input type="submit" id="{{ file_info.button_n }}" value="Create Annotation" title="Click to annotate using B2NOTE."/>

                        </td>

                    </tr>


                    <tr class="row3">

                        <td>{{ file_info.file_pid }}</td>

                    </tr>

                    <tr class="row4" colspan="2">

                        <td> </td>
                        <td> </td>

                    </tr>

                </form>

                {% endfor %}

            </table>

        </div>

        <hr>

        <div class = "container">

            <a class="btn btn-info" data-toggle="collapse" href="#collapse3"><strong>Further information</strong></a>

            <div id="collapse3" class="panel-collapse collapse in">

                <div class="panel-body">

                    <div class="clear"> </div>

                    <p>
                        The necessary information was collected by hand for a small subset of
                        files. <br /> However, it is expected that the information can easily
                        be gathered in an automated way by the actual file-hosting service.
                    </p>

                    <p>This information includes:</p>

                    <ul>

                        <li>The hyperlink address of the file (required).</li>
                        <li>A human-readable label for the hyperlink (optional).</li>

                    </ul>

                </div>

            </div>

        </div>

        {% endif %}

	</div>


	<footer>
		<div id="footer-content">
			<div class="container">
				<div class="row">
					<div class="col-xs-12 col-sm-1 col-md-1">
						<img alt="CE logo" title="CE logo" src="{% static 'images/logo_ce.jpg' %}" />
					</div>
					<div class="col-xs-12 col-sm-5 col-md-5">
						<p>
							EUDAT receives funding from the European Union’s Horizon 2020 research and innovation programme under grant agreement No. 654065.
							<a href="http://www.eudat.eu/legal-notice" target="_blank">Legal Notice</a>
						</p>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-6 text-right">
						<nav class="navbar navbar-footer">
							<ul id="menu" class="nav navbar-nav navbar-right pull-right">
								<li><a target="_blank" href="https://eudat.eu/what-eudat">About EUDAT</a></li>
								<li><a href="http://hdl.handle.net/11304/e43b2e3f-83c5-4e3f-b8b7-18d38d37a6cd" target="_blank">Terms of Use</a></li>
							</ul>
						</nav>
					</div>
				</div>
			</div>
		</div>
	</footer>

</body>

</html>
